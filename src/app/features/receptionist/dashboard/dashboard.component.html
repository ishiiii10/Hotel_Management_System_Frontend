<div class="dashboard-container">
  <app-receptionist-sidebar></app-receptionist-sidebar>

  <main class="main-content">
    <header class="dashboard-header">
      <h1 class="dashboard-title">Receptionist Dashboard</h1>
      <div class="header-right">
        <div class="user-info">{{ hotel?.name || 'Loading...' }}</div>
      </div>
    </header>

    <section class="metrics-section">
      <div class="metrics-grid">
        <div class="metric-card">
          <div class="metric-label">Check-ins Today</div>
          <div class="metric-value">{{ todayCheckIns.length }}</div>
        </div>
        <div class="metric-card">
          <div class="metric-label">Check-outs Today</div>
          <div class="metric-value">{{ todayCheckOuts.length }}</div>
        </div>
        <div class="metric-card">
          <div class="metric-label">Available Rooms</div>
          <div class="metric-value">{{ roomStatusCounts.available }}</div>
        </div>
        <div class="metric-card">
          <div class="metric-label">Occupied Rooms</div>
          <div class="metric-value">{{ roomStatusCounts.occupied }}</div>
        </div>
        <div class="metric-card">
          <div class="metric-label">Maintenance</div>
          <div class="metric-value">{{ roomStatusCounts.maintenance }}</div>
        </div>
        <div class="metric-card">
          <div class="metric-label">Out of Service</div>
          <div class="metric-value">{{ roomStatusCounts.outOfService }}</div>
        </div>
      </div>
    </section>

    <section class="quick-actions-section">
      <h2 class="section-title">Quick Actions</h2>
      <div class="actions-grid">
        <button class="action-btn" (click)="navigateToWalkIn()">Create Walk-in</button>
        <button class="action-btn" routerLink="/receptionist/check-in">Check In Guest</button>
        <button class="action-btn" routerLink="/receptionist/check-out">Check Out Guest</button>
        <button class="action-btn" (click)="openUpdateRoomStatusModal()">Update Room Status</button>
      </div>
    </section>

    <div class="content-grid">
      <section class="checkins-section">
        <h2 class="section-title">Today's Check-ins</h2>
        <div class="bookings-list">
          <div class="booking-item" *ngFor="let booking of todayCheckIns">
            <div class="booking-details">
              <div class="booking-id">Booking #{{ booking.id }}</div>
              <div class="booking-room">Room: {{ booking.roomId }}</div>
              <div class="booking-date">Check-in: {{ booking.checkInDate }}</div>
              <div class="booking-amount">${{ booking.totalAmount }}</div>
            </div>
          </div>
          <div *ngIf="todayCheckIns.length === 0" class="empty-state">No check-ins today</div>
        </div>
      </section>

      <section class="checkouts-section">
        <h2 class="section-title">Today's Check-outs</h2>
        <div class="bookings-list">
          <div class="booking-item" *ngFor="let booking of todayCheckOuts">
            <div class="booking-details">
              <div class="booking-id">Booking #{{ booking.id }}</div>
              <div class="booking-room">Room: {{ booking.roomId }}</div>
              <div class="booking-date">Check-out: {{ booking.checkOutDate }}</div>
              <div class="booking-amount">${{ booking.totalAmount }}</div>
            </div>
          </div>
          <div *ngIf="todayCheckOuts.length === 0" class="empty-state">No check-outs today</div>
        </div>
      </section>
    </div>

    <section class="room-status-section">
      <h2 class="section-title">Room Status Overview</h2>
      <div class="room-status-grid">
        <div class="status-card" *ngFor="let room of rooms.slice(0, 12)">
          <div class="room-number">{{ room.roomNumber }}</div>
          <div class="room-type">{{ room.roomType }}</div>
          <div class="room-status">{{ room.status }}</div>
        </div>
      </div>
    </section>
  </main>
</div>

<div class="modal-overlay" *ngIf="showUpdateRoomStatusModal" (click)="closeUpdateRoomStatusModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>Update Room Status</h2>
      <button class="close-button" (click)="closeUpdateRoomStatusModal()">X</button>
    </div>
    <div class="modal-body">
      <div class="form-group">
        <label class="form-label">Select Room</label>
        <select class="form-input" [(ngModel)]="selectedRoom" (ngModelChange)="selectedRoom = $any($event)">
          <option [ngValue]="null">Select a room</option>
          <option *ngFor="let room of rooms" [ngValue]="room">
            {{ room.roomNumber }} - {{ room.roomType }} ({{ room.status }})
          </option>
        </select>
      </div>
      <div class="form-group" *ngIf="selectedRoom">
        <label class="form-label">Current Status</label>
        <div class="form-input" style="background: #f5f5f5;">{{ selectedRoom.status }}</div>
      </div>
      <div class="form-group" *ngIf="selectedRoom">
        <label class="form-label">New Status</label>
        <select class="form-input" [(ngModel)]="selectedStatus">
          <option *ngFor="let status of roomStatuses" [value]="status">{{status}}</option>
        </select>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn-secondary" (click)="closeUpdateRoomStatusModal()">Cancel</button>
        <button type="button" class="btn-primary" (click)="onUpdateRoomStatus()" [disabled]="!selectedRoom">Update Status</button>
      </div>
    </div>
  </div>
</div>

