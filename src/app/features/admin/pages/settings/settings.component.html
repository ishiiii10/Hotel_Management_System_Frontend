<div class="dashboard-container">
  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="sidebar-header">
      <div class="logo">BELLE VUE</div>
    </div>
    <nav class="sidebar-nav">
      <a routerLink="/admin/dashboard" class="nav-item">Dashboard</a>
      <a routerLink="/admin/hotels" class="nav-item">Hotels</a>
      <a routerLink="/admin/users" class="nav-item">Users</a>
      <a routerLink="/admin/bookings" class="nav-item">Bookings</a>
      <a routerLink="/admin/reports" class="nav-item">Reports</a>
      <a routerLink="/admin/settings" class="nav-item active">Settings</a>
    </nav>
    <div class="sidebar-footer">
      <button class="logout-btn-sidebar" (click)="logout()">Logout</button>
    </div>
  </aside>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Header -->
    <header class="page-header">
      <h1 class="page-title">Settings</h1>
    </header>

    <!-- Settings Content -->
    <div class="settings-content">
      <div *ngIf="isLoading && !userProfile" class="loading-message">Loading profile...</div>

      <!-- Profile Information Section -->
      <section class="settings-section" *ngIf="userProfile">
        <div class="section-header">
          <h2 class="section-title">Profile Information</h2>
        </div>
        <div class="section-body">
          <div class="profile-info">
            <div class="info-group">
              <div class="info-label">Full Name</div>
              <div class="info-value">{{ userProfile.fullName }}</div>
            </div>
            <div class="info-group">
              <div class="info-label">Username</div>
              <div class="info-value">{{ userProfile.username }}</div>
            </div>
            <div class="info-group">
              <div class="info-label">Email</div>
              <div class="info-value">{{ userProfile.email }}</div>
            </div>
            <div class="info-group">
              <div class="info-label">Role</div>
              <div class="info-value">{{ userProfile.role }}</div>
            </div>
            <div class="info-group">
              <div class="info-label">User ID</div>
              <div class="info-value">{{ userProfile.publicUserId }}</div>
            </div>
            <div class="info-group">
              <div class="info-label">Status</div>
              <div class="info-value">{{ userProfile.enabled ? 'Enabled' : 'Disabled' }}</div>
            </div>
          </div>
          <div class="profile-actions">
            <button class="btn-primary" (click)="openChangePasswordModal()">Change Password</button>
          </div>
        </div>
      </section>
    </div>

    <!-- Change Password Modal -->
    <div class="modal-overlay" *ngIf="showChangePasswordModal" (click)="closeChangePasswordModal()">
      <div class="modal-content" (click)="$event.stopPropagation()">
        <div class="modal-header">
          <h2>Change Password</h2>
          <button class="close-button" (click)="closeChangePasswordModal()">X</button>
        </div>
        <div class="modal-body">
          <form (ngSubmit)="onChangePassword()">
            <div class="form-group">
              <label class="form-label">Current Password</label>
              <input 
                type="password" 
                class="form-input" 
                [(ngModel)]="currentPassword"
                name="currentPassword"
                placeholder="Enter current password"
                [disabled]="isLoading">
            </div>
            <div class="form-group">
              <label class="form-label">New Password</label>
              <input 
                type="password" 
                class="form-input" 
                [(ngModel)]="newPassword"
                name="newPassword"
                placeholder="Enter new password"
                [disabled]="isLoading">
              <div class="password-requirements">
                Password must contain at least 8 characters, including uppercase, lowercase, digit and special character
              </div>
            </div>
            <div class="form-group">
              <label class="form-label">Confirm New Password</label>
              <input 
                type="password" 
                class="form-input" 
                [(ngModel)]="confirmPassword"
                name="confirmPassword"
                placeholder="Confirm new password"
                [disabled]="isLoading">
            </div>
            <div *ngIf="passwordError" class="error-message">{{ passwordError }}</div>
            <div *ngIf="passwordSuccess" class="success-message">{{ passwordSuccess }}</div>
            <div class="modal-footer">
              <button type="button" class="btn-secondary" (click)="closeChangePasswordModal()" [disabled]="isLoading">Cancel</button>
              <button type="submit" class="btn-primary" [disabled]="isLoading">Change Password</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </main>
</div>

